# prompts.py

# 1. АНАЛИЗ КУСКА (Работает в цикле)
PROMPT_BATCH_ANALYSIS = """
Проанализируй этот фрагмент книги (Оригинал + Перевод).
Твоя цель — собрать данные для Глоссария и Описания стиля.

ВХОДНЫЕ ДАННЫЕ:
{content_chunk}

ЗАДАЧА:
Выпиши кратко:
1. ИМЕНА И НАЗВАНИЯ: Если видишь имя/локацию и её перевод — выпиши пару. (Например: "Winterfell -> Винтерфелл").
2. СЛОВАРНЫЙ ЗАПАС: Если есть редкие или специфические слова.
3. ОСОБЕННОСТИ: Как переводчик строит фразы?

ВЫВОД (ПРОСТО ТЕКСТ):
Список найденных пар и наблюдений. Не используй JSON, просто список.
"""

# 2. ФИНАЛЬНАЯ СБОРКА (Создание Master DNA)
PROMPT_FINAL_MERGE = """
Ты — главный редактор серии.
Мы просканировали 4 книги и собрали кучу разрозненных заметок.
Твоя задача — объединить их в единый, чистый, непротиворечивый документ (DNA).

СОБРАННЫЕ ЗАМЕТКИ:
{raw_notes}

ТРЕБОВАНИЯ:
1. Создай ЕДИНЫЙ ГЛОССАРИЙ. Если имя повторяется — оставь один вариант.
2. Опиши СТИЛЬ переводчика: выведи общую формулу на основе всех заметок.
3. Формат вывода — СТРОГО JSON.

ВЫВОД JSON:
{{
  "glossary": {{
      "Name_En": "Name_Ru",
      ...
  }},
  "style_rules": "Описание синтаксиса и ритма...",
  "formatting_rules": "Как работать с тегами..."
}}
"""

# 3. ПЕРЕВОДЧИК (То же, что и раньше, но с мощным DNA)
PROMPT_MIMIC_TRANSLATE = """
Ты — официальный переводчик серии.
Используй предоставленный DNA и Глоссарий как закон.

БАЗА ЗНАНИЙ (DNA):
{style_json}

ПРИМЕР (Reference):
{reference_sample}

ТЕКСТ ДЛЯ ПЕРЕВОДА (с тегами):
{source_text}

ЗАДАЧА:
Переведи, сохраняя теги <i>, <b>.
Имена и названия бери СТРОГО из блока "glossary" в DNA.

ВЫВОД:
Только перевод.
"""